# Modifico el m√≥dulo de subscription
# Creo los controller
# controllers.py
```python
# -*- coding: utf-8 -*-
from odoo import http
from odoo.http import request, Response
import json

class SubscriptionController(http.Controller):

    @http.route('/api/subscription', auth='public', methods=['GET'], csrf=False)
    def get_subscriptions(self, **kw):
        domain = []
        status_param = kw.get('status')
        valid_statuses = ['active', 'expired', 'pending', 'cancelled']

        if status_param:
            if status_param not in valid_statuses:
                error_msg = {'error': f'Invalid status. Allowed: {valid_statuses}'}
                return Response(json.dumps(error_msg), content_type='application/json', status=400)
            
            domain.append(('status', '=', status_param))

        subscriptions = request.env['subscription.subscription'].sudo().search(domain)
        
        data = []
        for sub in subscriptions:
            data.append({
                'name': sub.name,
                'customer': sub.customer_id.name,
                'code': sub.subscription_code,
                'status': sub.status,
                'end_date': str(sub.end_date) if sub.end_date else None,
                'price': sub.price
            })

        return Response(json.dumps({'count': len(data), 'results': data}), content_type='application/json', status=200)

    @http.route('/api/subscription/<string:name>', auth='public', methods=['GET'], csrf=False)
    def get_subscription_detail(self, name):
        sub = request.env['subscription.subscription'].sudo().search([('name', '=', name)], limit=1)

        if not sub:
            return Response(json.dumps({'error': 'Subscription not found'}), content_type='application/json', status=404)

        data = {
            'name': sub.name,
            'customer_id': sub.customer_id.id,
            'customer_name': sub.customer_id.name,
            'subscription_code': sub.subscription_code,
            'start_date': str(sub.start_date),
            'end_date': str(sub.end_date) if sub.end_date else None,
            'duration_months': sub.duration_months,
            'renewal_date': str(sub.renewal_date) if sub.renewal_date else None,
            'status': sub.status,
            'is_renewable': sub.is_renewable,
            'auto_renewal': sub.auto_renewal,
            'price': sub.price,
            'usage_limit': sub.usage_limit,
            'current_usage': sub.current_usage,
            'use_percent': sub.use_percent
        }

        return Response(json.dumps(data), content_type='application/json', status=200)
```
# Compruebo que funciona
![Captura 1](.\a1.png)
![Captura 2](.\a2.png)
![Captura 3](.\a3.png)
![Captura 4](.\a4.png)